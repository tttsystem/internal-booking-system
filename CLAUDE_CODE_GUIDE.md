# Claude Code 作業指示書 - サブスク事業部予定表

## 🎯 プロジェクト概要

これは社内専用のNotion連携予約システムです。サブスク事業部のメンバーが平日の会議や予定を効率的に管理できます。

## 📁 プロジェクト構造

```
internal-booking-system/
├── public/
│   └── index.html                    # HTMLテンプレート（Tailwind CSS含む）
├── src/
│   ├── components/
│   │   └── InternalBookingSystem.jsx # メインコンポーネント
│   ├── App.js                        # アプリケーションルート
│   └── index.js                      # エントリーポイント
├── netlify/
│   └── functions/
│       ├── notion-query.js           # 既存予約取得API
│       ├── notion-create.js          # 新規予約作成API
│       └── notion-users.js           # ユーザー一覧取得API
├── README.md                         # プロジェクト説明
├── SETUP_INSTRUCTIONS.md            # 詳細セットアップ指示書
└── CLAUDE_CODE_GUIDE.md            # この作業指示書
```

## 🔧 技術スタック

- **フロントエンド**: React (Hooks), Tailwind CSS
- **バックエンド**: Netlify Functions
- **API**: Notion API v2022-06-28
- **デザイン**: グラスモーフィズム、ブルーグラデーション
- **デプロイ**: Netlify

## 🗄️ データベース設定

### Notion設定
- **データベースID**: `1f344ae2d2c7804994e3ec2a11bb3f79`
- **プロパティ**: 予定名（タイトル）、日付（日付）、担当（ユーザー）、ユーザー（ユーザー）
- **環境変数**: `NOTION_TOKEN`

### 営業設定
- **営業時間**: 9:00-22:00
- **営業日**: 平日のみ（土日祝日は自動除外）
- **予約単位**: 1時間

## 💡 よく使うClaude Code指示例

### 🔧 機能追加・修正

#### 営業時間の変更
```
営業時間を10時から20時に変更してください
```
→ `src/components/InternalBookingSystem.jsx`の20-24行目を修正

#### 新しい入力項目の追加
```
予約フォームに「参加者数」の入力欄を追加してください（必須項目として）
```
→ フォーム部分とNotion API送信部分を修正

#### 祝日の更新
```
2026年の祝日リストを追加してください
```
→ 27-32行目の`holidays2025`配列を更新

#### デザインの調整
```
ヘッダーの色をブルーから緑に変更してください
```
→ グラデーション色の変更

### 🐛 バグ修正

#### 予約重複の問題
```
同じ時間帯に複数の予約ができてしまうバグを修正してください
```
→ `getBookingStatus`関数の重複チェックロジックを確認

#### ユーザー表示の問題
```
ユーザー名が正しく表示されない問題を修正してください
```
→ `getUserDisplayName`関数とユーザー取得ロジックを確認

#### タイムゾーンの問題
```
時刻がずれて表示される問題を修正してください
```
→ 日付処理で`+09:00`タイムゾーン指定を確認

### 🎨 UIデザイン

#### カラーテーマの変更
```
全体のカラーテーマを紫系から緑系に変更してください
```
→ CSS変数とTailwindクラスを更新

#### アニメーションの追加
```
予約確定時に成功アニメーションを追加してください
```
→ 新しいCSVアニメーションとReactステートを追加

#### レスポンシブ対応の改善
```
タブレット表示を最適化してください
```
→ Tailwindのブレークポイントクラスを調整

### 🔌 API・データベース

#### 新しいプロパティの追加
```
Notionデータベースに「会議室」プロパティを追加したので、
予約フォームに会議室選択を追加してください
```
→ フォームとAPI送信処理を更新

#### API エンドポイントの追加
```
予約をキャンセルする機能を追加してください
```
→ 新しいNetlify Functionとフロントエンド処理を作成

#### データ取得の最適化
```
初回読み込み時間を短縮してください
```
→ APIコールの最適化とキャッシング実装

### 📱 機能拡張

#### 通知機能の追加
```
予約確定時にSlack通知を送信する機能を追加してください
```
→ 新しいWebhook処理を実装

#### 一括予約機能
```
定期的な会議を一括で予約できる機能を追加してください
```
→ 繰り返し予約のロジックとUIを実装

#### 予約履歴表示
```
過去の予約履歴を確認できる画面を追加してください
```
→ 新しいコンポーネントとAPI処理を作成

## 🚨 トラブルシューティング指示

### APIエラーの対処
```
Notion APIでエラーが発生しています。ログを確認して修正してください
```
→ エラーハンドリングとログ出力を追加

### パフォーマンス問題
```
ページの読み込みが遅いので最適化してください
```
→ Reactの最適化とAPIリクエストの削減

### セキュリティ強化
```
入力値のバリデーションを強化してください
```
→ フロントエンドとバックエンドの両方でバリデーション追加

## 📋 開発時の注意事項

### コーディング規約
- 既存のコードスタイルに従う
- 日本語のコメントとUIテキストを維持
- エラーハンドリングを適切に行う
- console.logは最小限に抑える

### テスト手順
```
以下を確認してください：
1. npm startでローカル起動できるか
2. ユーザー一覧が正しく取得できるか
3. 予約作成が正常に動作するか
4. 既存予約との重複チェックが機能するか
5. 土日祝日が正しく除外されるか
```

### デプロイ前チェック
```
デプロイ前に以下を確認してください：
1. ビルドエラーがないか（npm run build）
2. Netlify環境変数が設定されているか
3. 本番環境でAPIが正常に動作するか
```

## 🔗 関連ファイル・設定

### 重要なファイル
- メインロジック: `src/components/InternalBookingSystem.jsx`
- API設定: `netlify/functions/` 配下の3ファイル
- スタイル: `public/index.html` 内のCSS
- 設定: README.md と SETUP_INSTRUCTIONS.md

### 環境変数
```
NOTION_TOKEN=secret_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### 外部サービス
- Notion API: https://api.notion.com/v1/
- Netlify Functions: `/.netlify/functions/`
- フォント: Google Fonts (Inter, Noto Sans JP)
- アイコン: Font Awesome 6.5.1

## 📞 サポート

問題が発生した場合：
1. ブラウザのコンソールログを確認
2. Netlify Functions のログを確認
3. Notion API のレスポンスを確認
4. SETUP_INSTRUCTIONS.md の詳細ガイドを参照

---

*この指示書は、Claude Codeで効率的に開発作業を行うためのガイドです。*
*最終更新: 2025年1月*